<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Message Passing Library: iterators.cc</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Message Passing Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('iterators_8cc-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">iterators.cc</div></div>
</div><!--header-->
<div class="contents">
<p >Sends and receives containers (std::vector, std::list, etc.) given by their iterators. The types of the array elements must be suited for communication. On the receiving side, there must be sufficient preallocated memory, i.e., sending and receiving containers must be of the same size. Furthermore, tracking the address of a dereferenced iterator must result a non-const pointer on the receiving side.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;cstdlib&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;numeric&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;mpl/mpl.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">  <span class="keyword">const</span> <a id="_a0" name="_a0"></a><a class="code hl_class" href="classmpl_1_1communicator.html">mpl::communicator</a> &amp;<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>{<a id="a1" name="a1"></a><a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">mpl::environment::comm_world</a>()};</div>
<div class="line">  <span class="comment">// run the program with two or more processes</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a id="a2" name="a2"></a><a class="code hl_function" href="classmpl_1_1communicator.html#abe1bd8f32c690ee7a31456da2c437bdf">size</a>() &lt; 2)</div>
<div class="line">    <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a id="a3" name="a3"></a><a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#a396840f91fb5d7b62c0f5128eb93d6ca">abort</a>(EXIT_FAILURE);</div>
<div class="line">  <span class="comment">// send / receive a single vector</span></div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> n{10};</div>
<div class="line">    std::vector&lt;double&gt; l(n);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a id="a4" name="a4"></a><a class="code hl_function" href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">rank</a>() == 0) {</div>
<div class="line">      std::iota(begin(l), end(l), 1);</div>
<div class="line">      <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a id="a5" name="a5"></a><a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#ac3b0e731726a939727ff816a614d241b">send</a>(begin(l), end(l), 1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">rank</a>() == 1) {</div>
<div class="line">      <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a id="a6" name="a6"></a><a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#a8ed451f2d5ea46348a1e4ca1ecd84ee8">recv</a>(begin(l), end(l), 0);</div>
<div class="line">      std::for_each(begin(l), end(l), [](<span class="keywordtype">double</span> x) { std::cout &lt;&lt; x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; });</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// send / receive a single list</span></div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> n{10};</div>
<div class="line">    std::list&lt;double&gt; l(n);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">rank</a>() == 0) {</div>
<div class="line">      std::iota(begin(l), end(l), 1);</div>
<div class="line">      <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#ac3b0e731726a939727ff816a614d241b">send</a>(begin(l), end(l), 1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">rank</a>() == 1) {</div>
<div class="line">      <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#a8ed451f2d5ea46348a1e4ca1ecd84ee8">recv</a>(begin(l), end(l), 0);</div>
<div class="line">      std::for_each(begin(l), end(l), [](<span class="keywordtype">double</span> x) { std::cout &lt;&lt; x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; });</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// send a set / receive an array</span></div>
<div class="line">  {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> n{10};</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">rank</a>() == 0) {</div>
<div class="line">      std::set&lt;double&gt; s;</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i{1}; i &lt;= n; ++i)</div>
<div class="line">        s.insert(i);</div>
<div class="line">      <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#ac3b0e731726a939727ff816a614d241b">send</a>(s.begin(), s.end(), 1);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">rank</a>() == 1) {</div>
<div class="line">      std::array&lt;double, n&gt; l;</div>
<div class="line">      <a class="code hl_function" href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">comm_world</a>.<a class="code hl_function" href="classmpl_1_1impl_1_1base__communicator.html#a8ed451f2d5ea46348a1e4ca1ecd84ee8">recv</a>(begin(l), end(l), 0);</div>
<div class="line">      std::for_each(begin(l), end(l), [](<span class="keywordtype">double</span> x) { std::cout &lt;&lt; x &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>; });</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="aclassmpl_1_1communicator_html"><div class="ttname"><a href="classmpl_1_1communicator.html">mpl::communicator</a></div><div class="ttdoc">Specifies the communication context for a communication operation.</div><div class="ttdef"><b>Definition:</b> <a href="comm__group_8hpp_source.html#l03900">comm_group.hpp:3900</a></div></div>
<div class="ttc" id="aclassmpl_1_1communicator_html_abe1bd8f32c690ee7a31456da2c437bdf"><div class="ttname"><a href="classmpl_1_1communicator.html#abe1bd8f32c690ee7a31456da2c437bdf">mpl::communicator::size</a></div><div class="ttdeci">int size() const</div><div class="ttdoc">Determines the total number of processes in a communicator.</div><div class="ttdef"><b>Definition:</b> <a href="comm__group_8hpp_source.html#l04042">comm_group.hpp:4042</a></div></div>
<div class="ttc" id="aclassmpl_1_1communicator_html_ae07d74b4f28b45e4bf56777d5d2a9789"><div class="ttname"><a href="classmpl_1_1communicator.html#ae07d74b4f28b45e4bf56777d5d2a9789">mpl::communicator::rank</a></div><div class="ttdeci">int rank() const</div><div class="ttdoc">Determines the rank within a communicator.</div><div class="ttdef"><b>Definition:</b> <a href="comm__group_8hpp_source.html#l04046">comm_group.hpp:4046</a></div></div>
<div class="ttc" id="aclassmpl_1_1impl_1_1base__communicator_html_a396840f91fb5d7b62c0f5128eb93d6ca"><div class="ttname"><a href="classmpl_1_1impl_1_1base__communicator.html#a396840f91fb5d7b62c0f5128eb93d6ca">mpl::impl::base_communicator::abort</a></div><div class="ttdeci">void abort(int err) const</div><div class="ttdoc">Aborts all processes associated to the communicator.</div><div class="ttdef"><b>Definition:</b> <a href="comm__group_8hpp_source.html#l00499">comm_group.hpp:499</a></div></div>
<div class="ttc" id="aclassmpl_1_1impl_1_1base__communicator_html_a8ed451f2d5ea46348a1e4ca1ecd84ee8"><div class="ttname"><a href="classmpl_1_1impl_1_1base__communicator.html#a8ed451f2d5ea46348a1e4ca1ecd84ee8">mpl::impl::base_communicator::recv</a></div><div class="ttdeci">status_t recv(T &amp;data, int source, tag_t t=tag_t(0)) const</div><div class="ttdoc">Receives a message with a single value.</div><div class="ttdef"><b>Definition:</b> <a href="comm__group_8hpp_source.html#l01698">comm_group.hpp:1698</a></div></div>
<div class="ttc" id="aclassmpl_1_1impl_1_1base__communicator_html_ac3b0e731726a939727ff816a614d241b"><div class="ttname"><a href="classmpl_1_1impl_1_1base__communicator.html#ac3b0e731726a939727ff816a614d241b">mpl::impl::base_communicator::send</a></div><div class="ttdeci">void send(const T &amp;data, int destination, tag_t t=tag_t(0)) const</div><div class="ttdoc">Sends a message with a single value via a blocking standard send operation.</div><div class="ttdef"><b>Definition:</b> <a href="comm__group_8hpp_source.html#l00541">comm_group.hpp:541</a></div></div>
<div class="ttc" id="anamespacempl_1_1environment_html_a1f4644f4435160bb33ada569dc3f48ac"><div class="ttname"><a href="namespacempl_1_1environment.html#a1f4644f4435160bb33ada569dc3f48ac">mpl::environment::comm_world</a></div><div class="ttdeci">const communicator &amp; comm_world()</div><div class="ttdoc">Provides access to a predefined communicator that allows communication with all processes.</div><div class="ttdef"><b>Definition:</b> <a href="environment_8hpp_source.html#l00148">environment.hpp:148</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
